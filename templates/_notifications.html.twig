{#/*********************************************************************************
 * This file is part of Myddleware.

 * @package Myddleware
 * @copyright Copyright (C) 2013 - 2015  Stéphane Faure - CRMconsult EURL
 * @copyright Copyright (C) 2015 - 2016  Stéphane Faure - Myddleware ltd - contact@myddleware.com
 * @link http://www.myddleware.com	
 
 This file is part of Myddleware.
 
 Myddleware is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 Myddleware is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with Myddleware.  If not, see <http://www.gnu.org/licenses/>.
*********************************************************************************/ #}

{% set prefix = filter_prefix|default(null) %}

{% set map = {
  'success':'success',
  'notice':'info',
  'info':'info',
  'warning':'warning',
  'error':'danger',
  'danger':'danger'
} %}

{% for type, messages in app.flashes %}
    {% set parts   = type|split('.') %}
    {% set level   = parts|last %}
    {% set variant = map[level]|default(map[type]|default('info')) %}

    {% if prefix is null or (type starts with prefix) %}
        {% for message in messages %}
            <div class="mdw-alert mdw-alert--{{ variant }} mb-4" role="alert" aria-live="polite">
                <span class="mdw-alert__bar"></span>
                <span class="mdw-alert__icon" aria-hidden="true">
                    {% if variant == 'success' %}✔{% elseif variant == 'warning' %}!{% elseif variant == 'danger' %}✖{% else %}ℹ{% endif %}
                </span>
                    <div class="mdw-alert__content">
                    {{ message|raw }}
                    </div>
                <div>
                    <button type="button" class="mdw-alert__close" aria-label="Fermer">✕</button>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endfor %}
