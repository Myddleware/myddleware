{% extends 'base.html.twig' %}

{% block title %}
    {{ parent() }} | {{ 'settings.title'|trans }}
{% endblock %}

{% block titlesm %}
    {{ 'settings.title'|trans }}
{% endblock titlesm %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('settings') }}
    <link rel="stylesheet" href="{{ asset('assets/css/toggle-switch.css') }}">
{% endblock %}

{% block body %}
    {% include '_notifications.html.twig' with { filter_prefix: 'settings.' } %}
    {% include '_notifications.html.twig' with { filter_prefix: 'smtp.' } %}

    <div class="container p-5">
        <div class="row justify-content-md-center">
            <div class="col-10">

                <!-- Bootstrap 5 Tabs Navigation -->
                <ul class="nav nav-pills mb-4 justify-content-center" id="settingsTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link {{ activeTab == 'general' ? 'active' : '' }}"
                                id="general-tab"
                                data-bs-toggle="tab"
                                data-bs-target="#general"
                                type="button"
                                role="tab"
                                aria-controls="general"
                                aria-selected="{{ activeTab == 'general' ? 'true' : 'false' }}">
                            <i class="fas fa-cog me-2"></i>{{ 'settings.tabs.general'|trans }}
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link {{ activeTab == 'smtp' ? 'active' : '' }}"
                                id="smtp-tab"
                                data-bs-toggle="tab"
                                data-bs-target="#smtp"
                                type="button"
                                role="tab"
                                aria-controls="smtp"
                                aria-selected="{{ activeTab == 'smtp' ? 'true' : 'false' }}">
                            <i class="fas fa-envelope me-2"></i>{{ 'settings.tabs.smtp'|trans }}
                        </button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="settingsTabContent">
                    <!-- General/Preferences Tab -->
                    <div class="tab-pane fade {{ activeTab == 'general' ? 'show active' : '' }}"
                         id="general"
                         role="tabpanel"
                         aria-labelledby="general-tab">
                        {% include 'SystemSettings/_general_tab.html.twig' %}
                    </div>

                    <!-- SMTP Management Tab -->
                    <div class="tab-pane fade {{ activeTab == 'smtp' ? 'show active' : '' }}"
                         id="smtp"
                         role="tabpanel"
                         aria-labelledby="smtp-tab">
                        {% include 'SystemSettings/_smtp_tab.html.twig' %}
                    </div>
                </div>

            </div>
        </div>
    </div>
{% endblock body %}

{% block js %}
    {{ parent() }}
    {{ encore_entry_script_tags('settings') }}
{% endblock js %}
