<section class="mb-5 d-none" id="step-2"
  data-path-module="{{ path('regle_list_module') }}"
  data-path-connection-check="{{ path('regle_inputs') }}"
  data-path-connectors="{{ path('regle_list_connectors') }}">

  <div class="section-chevron" aria-hidden="true">
    <a href="#step-2" class="section-chevron">
      <i class="fa-solid fa-circle-chevron-down"></i>
    </a> 
  </div>

  <h3 class="section-create-rule fw-bold mb-4">
    {{ 'animate.ruleconnection'| trans }}
  </h3>
  
  <button id="nav-create-rule-connection" class="nav-create-rule btn btn-outline-primary mb-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#ruleCreateNav" aria-controls="ruleCreateNav">
        <i class="fa-solid fa-list-ul"></i>
  </button>

  <div class="row gy-5">
    {# --------- SOURCE --------- #}
    <div class="col-12 col-lg-6">
      <h3 class="h5 mb-3">{{ 'animate.solution.source'|trans({'default':'Source'}) }}</h3>

      <div class="row g-3">
        <div class="col-12">
          <label class="form-label">Solution</label>
          <select id="source-solution" class="form-select form-select-lg" required>
            <option value="" selected disabled></option>
            {% for sol in solutions|default([]) %}
              {# value = ID (recommand√©), slug en data #}
              <option value="{{ sol.id }}" data-solution-slug="{{ sol.name|lower }}">{{ sol.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Connector</label>
          <div class="position-relative">
            {# IMPORTANT : id correct, vide au chargement (AJAX remplira les <option>) #}
            <select id="source-connector" class="form-select form-select-lg" disabled required>
              <option value="" selected disabled></option>
            </select>
            <div id="source-connector-spinner" class="position-absolute top-50 end-0 translate-middle-y pe-5 d-none">
              <div class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></div>
            </div>
          </div>
          <div id="source-connector-feedback" class="form-text"></div>
        </div>

        <div class="col-12">
          <label class="form-label">Module</label>
          <select id="source-module" class="form-select form-select-lg" disabled required>
            <option value="" disabled selected></option>
          </select>
          <div id="source-module-feedback" class="form-text"></div>
        </div>
      </div>
    </div>

    {# --------- TARGET --------- #}
    <div class="col-12 col-lg-6">
      <h3 class="h5 mb-3">{{ 'animate.solution.target'|trans({'default':'Target'}) }}</h3>

      <div class="row g-3">
        <div class="col-12">
          <label class="form-label">Solution</label>
          <select id="target-solution" class="form-select form-select-lg" required>
            <option value="" selected disabled></option>
            {% for sol in solutions|default([]) %}
              <option value="{{ sol.id }}" data-solution-slug="{{ sol.name|lower }}">{{ sol.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Connector</label>
          <div class="position-relative">
            <select id="target-connector" class="form-select form-select-lg" disabled required>
              <option value="" selected disabled></option>
            </select>
            <div id="target-connector-spinner" class="position-absolute top-50 end-0 translate-middle-y pe-5 d-none">
              <div class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></div>
            </div>
          </div>
          <div id="target-connector-feedback" class="form-text"></div>
        </div>

        <div class="col-12">
          <label class="form-label">Module</label>
          <select id="target-module" class="form-select form-select-lg" disabled required>
            <option value="" disabled selected></option>
          </select>
          <div id="target-module-feedback" class="form-text"></div>
        </div>
      </div>
    </div>
  </div>
</section>
